@page "/{num:int}"
@inject HttpClient Http
<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>
<h2>EL numero es: @Num</h2>

Welcome to your new app. 
@*randomFact.num = @Num;*@
<!--<SurveyPrompt Title="How is Blazor working for you?" /> -->
<p>@randomFact.text</p>
@if (randomFact.text == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div>
        <strong>@randomFact.text</strong>
    </div>
}



@code {
    [Parameter] public int Num { get; set; }
    RandomFact randomFact = new RandomFact();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var response = await Http.GetStringAsync("http://numbersapi.com/" + Num);
            Console.WriteLine(response); // Imprime la respuesta JSON en la consola del navegador
            //randomFact = Newtonsoft.Json.JsonConvert.DeserializeObject<RandomFact>(response);
            randomFact.text = response;
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error: " + ex.Message);
        }
    }


    public class RandomFact
    {
        public string text { get; set; }
    }
}
